### 科学计数法

6,100,000,000=6.1×109，即6.1E9或6.1e9。

0.00001=1×10-5，即绝对值小于1的数也可以用科学记数法表示为a乘10-n的形式。即1E-5或1e-5

### 3.3 数据: 数据类型关键字

**位, 字节和字**

+ 最小的存储单元是位 (bit), 只能存储 0 或 1. (*bit 只是计算机细节, 不是存储单位. 最小的存储单位是 byte 字节, 所以是字节跳动 byte dance 而不是位跳动 bit dance*)
+ 字节 (byte) 是常用的计算机存储单位. 1 字节均为 8 位. 8 位字节有 256 (2 的 8 次方) 种可能, 这 256 种可能就是 ASCII 表.
+ 字 (Word) 是人类字符中的字, 这个存储多大就不一定了.

#### 3.3.2 整数

以 1 个字节有 8 位为例, 整数在计算机中的存储是先转化为二进制, 不足 8 位的前面用 0 填充.

#### 3.3.3 浮点数

浮点数的存储可以理解为, 先转化为科学记数法, 然后分别存储小数部分和指数部分.

### 3.4 C语言基本数据类型

#### 3.4.1 int 类型

**int 取值范围**

早期的机器是 16 位的, 所以 int 的取值范围就规定为 -32768(2的15次方) ~ 32767.

**声明变量**

```c
// 创建存储空间
int a;
```

**变量赋值**

```c
// 赋值
a = 1;
```

简写:

```c
int a = 1;
```

**打印**

使用 `%d` 表示. 

例子: [3.2 print1.c](./3/print1.c)

#### 5 八进制和十六进制

**十六进制**

使用 `0x` 或 `0X` 前缀表示.

打印: `%x` 或 `%X`  可以打印十六进制, 使用 `%#x` 可以打印出 `0X` 前缀.

**八进制**

使用 `0` 表示.

打印(*注意是字母 o, 不是 0*): `%o` , 使用 `%#o` 可以显示出 `0` 前缀.

**练习**

程序清单: [3.3 bases.c](3/bases.c)

#### 3.4.2 其他整数类型

C 语言提供了 3 个附属关键字来修饰基本整数类型:

+ `short int` (或者简写为 `short`), 占用的存储空间可能比 int 类型少, 常用于较小数值的场合以节省空间. 与 int 类似, short 是 *有符号类型*
+ `long int` (简写 `long`), 适用于长整数, 有符号类型.
+ `long long int` (简写 `long long`), 至少占 64 位, 有符号类型.
+ `unsigned int` (简写 unsigned), 无符号类型, 适用于非负值场合.
+ 以上类型又都提供了 `unsigned`, 以便节省空间.

**整数溢出**

这个例子表明, 当 int 溢出时会变成负数, 当 unsigned int 溢出时会重新从 0 开始. 原因是溢出了取值范围, 表示符号类型的那一位就变成 1了, 1 是负数的标识.

[toobig.c](./3/toobig.c)

**4. 打印 short, long, long long 和 unsigned 类型**

+ 打印 unsigned int, 使用 `%u`
+ 打印 long int, 使用 `%ld`, 打印八进制使用 `%lo`, 打印十六进制使用 `%lx`
+ 打印 short, 十进制使用 `%hd`, 八进制 `%ho`, 十六进制使用 `%hx`
+ 打印 long long, 使用 `%lld`
+ 打印 long long unsign, 使用 `%llu`

程序清单: [3.4 print2.c](./3/print2.c)

打印的内部实现:

+ Int 类型是计算机处理整数类型时最高效的类型, int 比 short 还要快, short 只不过是节省空间.
+ 使用 `h` 修饰符可以显示较大整数被截成 short 类型值的情况. 

打印原理的内部实现是:

把 65537 以二进制格式写成一个 32 位数是 00000000000000010000000000000001。使用%hd，printf()只会查看后 16 位，所以显示的值是 1.

#### 3.4.3 使用字符: char类型

Char 类型用于存储字符(如 字母或标点符号). 但是从技术层面看, char 是整数类型. 因为 char类型实际上存储的是整数而不是字符. 

计算机使用数字编码来处理字符, 即使用特定的整数表示特定的字符. 本书使用的是 ASCII 码.

标准 ASCII 码的范围是 `0~127`, 值需要 7 位二进制数就可表示. `char` 类型被定义为 8 位的存储单元, 所以存储 ASCII 绰绰有余.

**1. 声明 char 类型变量**

```c
char response;
char itable, laten;
```

**2. 字符常量和初始化**

使用单引号声明字符常量.

```c
char grade = 'A';
```

因为 char 实际以数值形式存储的, 所以也可以直击使用数字代码值来赋值:

```c
char grade = 65;
```

**3. 非打印字符**

有一些代表行为的字符, 如: 退格, 换行, 终端响铃或蜂鸣. ASCII 字符打印不出来, C 语言提供了 3 种方法表示这些字符:

+ 方法1: 直接使用数字.

```c
char beep = 7;
```

+ 方法2: 使用转义序列表示特殊字符.

```c
char nerf = '\n';
```

+ 方法3: 使用十六进制形式表示字符常量.
+ 方法4: 使用八进制 , 以 `\0` 就可以表示为八进制了. 
  + 如报警字符, 写为 `\007`, `\07`, `\7` 都可以被编译器理解为八进制.

即反斜杠后面跟着一个 x 或 X, 再加上 1~3 位十六进制数字.

**常见的非打印字符**

活跃位置, 指显示设备中下一个字符将出现的位置. 简而言之就是光标的位置.

+ `\f`, 换页符, 把活跃位置移动到下一页的开始处.
+ `\n`, 换行符, 把活跃位置移动到下一行的开始处.
+ `\t`, 水平制表符, 每8个字符可以看做是一个水平制表符, 如果遇到 `\t` 之前没有满 8 个字符, 则使用空格填补.

```c
printf("1234567\t8");
printf("12345678\t9");
printf("123456789\t9");
```

**4. 打印字符**

`printf()` 函数用 `%c` 指明待打印的字符. 一个字符变量实际上被储存为 1 字节的整数值.

**5. 有符号还是无符号**

要看编译器, 有的把 char 实现为有符号类型, 有的把 char 实现为无符号类型.

根据 c 90 的标准, char 关键字前可以使用 `signed` 或 `unsigned`

#### 3.4.4 Bool 类型

Bool 类型实际也是整数, 仅占用 1 位存储空间.

#### 3.4.5 可移植类型: stdint.h 和 inttypes.h

Stdint.h 中定义了新的类型名, 原来的类型名在不同的系统中可能有不同的含义, 通过这两个新的文件把不同类型名统一起来, 增强了语言的可移植性.

例如,  int32_t 表示 32 位的有符号整数类型, 在使用 32 位 int 的系统中, 头文件会把 int32_t 作为 int 的别名.

**如何做到跨系统呢?**

使用 int32_t 类型编写程序, 并包含 stdint.h 头文件时, 编译器就会把 int 或 long 替换成与当前系统匹配的类型.

**最小宽度类型( minimum width type)**

如果操作系统不支持精确宽度整数类型, 计算机还提供了一组最小宽度类型. 如, `int_least8_t` 是可容纳 8 位有符号整数值的类型中宽度最小的类型的一个别名. 如果某系统最小整数类型是 16 位, 那么 int_least8_t 就会被扩展到 16 位的整数类型.

**最快最小宽度类型**

如 `int_fast8_t` 被定义为系统中对 8 位有符号值而言运算最快的整数类型的别名.

### 3.4.6 float, double 和 long double

C 标准规定, float 类型必须至少能表示 6 位有效数字, (*即小数点后保留 6 位的意思*). 通常, 系统存储一个浮点数要占用 32 位. 其中 8 位用于表示指数的值和符号, 剩下的 24 位表示非指数部分.

double 类型能存储到小数点后 10 位, double 占用 64 位, 多出来的部分全部分给非指数部分.

long double, 比 double 有更高的精度.

**打印**

使用 `%e` 打印指数记数法的浮点数.

[程序 3.7 showf_pt.c](./showf_pt.c)

**4. 浮点值的上溢和下溢**

上溢: 大到无法显示, 会显示一个无穷大的值. printf 显示为 inf 或 infinity.

下溢: 精读无法显示.

NaN: 特殊的浮点值, (not a number 的缩写),  比如 `asin()` 的参数应该不大于1, 如果大于 1 则会抛出此异常.

**浮点数舍入错误**

```c
#include <stdio.h>

int main(void)
{
  float a,b;
  b = 2.0e20 + 1.0;
  a = b - 2.0e20;
  printf("%f \n", a);
  
  return 0;
}
```

这个答案会很奇怪, 因为 2.0e20 是 2 后面有 20 个 0, 如果把该数加 1 , 发生变化的是第 21 位. 要正确运算, 程序至少存储 21 位数字. 而 float 类型只有 6 位的精确度, 所以结果肯定是错误的.

#### 3.4.7 复数和虚数类型

pass

#### 3.4.9 类型大小

[程序清单 3.8 typesize.c](./3/typesize.c)

`sizeof` 是 C 语言内置运算符, 以字节为单位给出指定类型的大小, 在 printf 中需要使用 `%zd` 说明匹配 sizeof 的返回类型.

### 3.5 使用数据类型

声明的数据类型要和赋值的数据类型一致, 不一致也可以, 但是可能出问题.

### 3.6 参数和陷阱

因为 `printf` 和 `scanf` 的参数是可变的, 所以编译器不能检查参数个数是否正确.

### 3.7 转义序列示例

[程序清单3.10 escape.c](./c/escape.c)

#### 3.7.2 刷新输出

`prinf` 何时把输出发送到屏幕上的?

最初, `printf` 语句把输出发送到一个叫做缓冲区 (buffer) 的中间存储区域, 然后缓冲区中的内容再不断被发送到屏幕上. 

C 标准明确规定了何时把缓冲区中的内容发送到屏幕: 当缓冲区满, 遇到换行字符或需要输入的时候(从缓冲区把数据发送到屏幕或文件被称为刷新缓冲区).

### 3.8 关键概念

+ C 语言的数据类型非常丰富.
+ 计算机中的浮点数和整数在本质上不同, 即便值相等, 它们的存储方式也完全不同. (Float 分整数和指数两部分, 分别进行存储)
+ 计算机在内存中使用数值表示字符.

### 3.9 本章小结

C 有多种的数据类型. 基本数据类型分为 2 类: 整数类型和浮点数类型.

通过为类型分配的存储量以及是否有符号还是无符号, 区分不同的整数类型. 

最小的整数类型是 char, 看编译器, 分为有符号的 char 或无符号的 char

...

### 3.10 复习题

1. 选择合适数据类型

a. Long

b. float

c. Char

d. int 

2. 当数值大于 2 的 16 次方.















