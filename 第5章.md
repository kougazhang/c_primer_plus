# 第 5 章

## 5.1 循环

[程序清单 5.1](./5/shoes1.c)

[程序清单 5.2](./5/shoes2.c)

## 5.2 基本运算符

### 5.2.1 赋值运算符 =

`=` 是赋值运算符, 读起来的时候是从右向左的. `bmw = 2002` 读作 "把值 2002 赋给遍历 bmw".

如果你从左向右按照数学那样理解, 那么下面这条语句就不容易理解:

```c
// 把 i + 1 的值赋值给变量 i
i = i + 1
```

*不能给常量赋值*

```c
2002 = bmw;
```

等号右边叫右值, 等号左边叫左值.

不能给常量赋值, 常量本身(2002) 就是它的值. 

= 号的左侧必须是一个变量名. 实际上, 赋值运算符左侧必须引用一个存储位置. (如指针). 概括来说, C 使用可修改的左值 (modifiable lvaue) 标记那么可赋值的实体.

**C 语言的赋值就是从右往左进行的, 对此可以多重赋值.**

[程序清单 5.3 golf.c](./5/golf.c)

### 5.2.2~4 加法运算符 +/-

二元运算符: 需要两个对象才能完成运算的符号. (一元运算符同理)

+ `+` 表示二元运算符时为数学加法, 一元运算符时表示正数;
+ `-` 二元运算符时表示数学减法, 一元运算符时表示负数;
+ `*` 乘法就是数学中的乘法.
+ `/` 除法的结果是会截断计算结果的小数部分(不是四舍五入)

### 5.2.7 运算符优先级

符合数学上的定义

## 5.3 其他运算符

C 语言大概有 40 个运算符.

### 5.3.1 sizeof 运算符和 size_t 类型

`sizeof` 运算符以字节为单位返回运算对象的大小(在 C 中, 1 字节定义为 `char` 类型所占的空间大小. 过去, 1 字节通常等于 8 位, 但是一些字符集可能使用更大的字节.) 运算对象可以是具体的数据对象(如, 变量名) 或类型. 如果运算对象是类型, 则必须用圆括号将其括起来.

[程序清单 5.8 sizeof.c](./5/sizeof.c)

**使用 %zd 打印 sizeof 的值**

`sizeof` 返回 `size_t` 类型的值. 这是一个无符号整数类型. 

### 5.3.2 求模运算符: %

求模就是求余数.

[程序清单 5.9 min_sec.c](./5/min_sec.c)

### 5.3.3 递增运算符: ++

递增运算符(increment operator) 执行简单任务, 将其运算对象递增 1. 有两种方式:

+ 第一种 `++` 出现在其作用的对象前面, 前缀操作符
+ 第二种出现在后面. 两种模式的区别是递增的行为发生的时间不同. 后缀操作符

[程序清单 add_one.c](./5/add_one.c)

前缀操作符用在 `while` 循环的条件中.

```c
#include <stdio.h>
#define SCALE 0.333
#define ADJUST 7.31

int main(void) {
  float foot;
  float shoe = 3.0;
  while (++shoe < 18.5){
      foot = SCALE*shoe+ADJUST;
      printf("%10.1f %20.2f inches\n", shoe, foot);
  }
  return 0;
}
```

**前缀表达式和后缀表达式的区别**

+ 前缀表达式是先运算后赋值;
+ 后缀表达式是后运算先赋值;

### 5.3.4 递减运算符: --

+ `--count`, 前缀形式的递减运算符
+ `count--`, 后缀形式的递减运算符

### 5.3.5 优先级

递增和递减的优先级非常高, 仅次于园括号.

## 5.4 表达式和语句

### 5.4.1 表达式

表达式是值.

### 5.4.2 语句

C 把末尾加上一个分号的表达式都看作是一个语句.

**副作用: side effect**

副作用是对数据对象或文件的修改.

**序列点: sequence point**

序列点是程序执行的点, 在该点上, 所有的副作用都是在进入下一步之前发生.

### 5.4.3 复合语句(块)

花括号括起来的多条语句

## 5.5 类型转换

C 语言有隐式类型转换.

隐式类型转换的简单规则:

+ 一般会类型升级(也就是容忍度更高的类型)
+ 类型降级. 类型降级可能会出现问题.

[程序清单 5.14 convert.c](./5/convert.c)

### 5.5.1 强制类型转换运算符(cast operator)

圆括号和它括起来的类型名构成了强制类型转换运算符(cast operator), 其通用形式是: `(type)`

基本形式:

```c
int mice;
// 自动类型转换, 先进行浮点数运算得出和 3.3, 然后 3.3 被类型转换截断为整数 3.
mice = 1.6 + 1.7;
// 先进行类型转换, 1.6 和 1.7 都被类型转换截断为整数 1, 相加和为 2.
mice = (int)1.6 + (int)1.7;
```

**总结 C 的一些运算符**

+ 赋值运算符: `=` 将其右侧的值赋给左侧的变量
+ 算术运算符:
  + 加减乘除
  + `%` 取模
  + `++` , 可以是前缀运算符, 后缀运算符.
  + `--`, 可以是前缀运算符, 后缀运算符.
+ 其他运算符:
  + `sizeof` , 获取右侧运算对象的大小(以字节为单位), 当运算对象是类型时必须加括号, 得出的值是 unsignd, print 时使用 `%zd`
  + (typeName), 强制类型转换运算符将其右侧的值转换成圆括号中指定的类型.

## 5.6 带参数的函数

[程序清单 5.15 pound.c](./5/pound.c)

*函数签名*

```c
void pound(int n)
```

*形参(formal argument)和实参(actual argument)* 

函数签名中参数是形参, 实际调用时传递的参数是实参.

## 5.7 示例程序

[程序清单 running.c](./5/running.c)

## 5.8 关键概念

要知道运算符的结合律, 不要依赖隐式类型转换.

## 5.9 小结

pass

## 5.10 复习题

pass

## 5.11 

[程序清单](./5/5.11)

2. 把自增运算符放到 while 里面输出还是不符合预期.







